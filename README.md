# java-convenience-store-precourse

# 편의점 결제 시스템


## 기능 요구 사항
구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산하고 안내하는 편의점 결제 시스템을 구현합니다.

### 1. 파일 입출력
- [x] `src/main/resources/products.md` 파일로부터 상품 목록을 불러오는 기능 구현
- [x] `src/main/resources/promotions.md` 파일로부터 행사 목록을 불러오는 기능 구현

### 2. 상품 정보 출력
- [x] 편의점의 모든 상품 정보를 출력하는 기능 구현
- [x] 재고가 없는 상품은 "재고 없음"으로 출력

### 3. 구매 입력 처리
- [x] 상품명과 수량을 입력받아 구매 목록을 생성하는 기능 구현
- [x] 입력 형식을 검증하고, 올바르지 않은 형식일 경우 오류 메시지 출력 (오류 메시지는 `[ERROR]`로 시작)

### 4. 재고 검증 및 업데이트
- [x] 구매할 상품의 재고 수량 확인 및 결제 가능 여부 검증
- [x] 재고 수량이 부족한 경우 오류 메시지 출력
- [x] 결제 완료 시 해당 수량만큼 재고에서 차감
- [x] 재고 차감은 프로모션 재고부터 차감 이후 프로모션 재고가 다 소진 되면 일반 재고 차감

### 5. 프로모션 할인 적용
- [x] 구매한 상품에 대해 프로모션 할인 적용 가능 여부 확인
- [x] `1+1`, `2+1` 프로모션 적용 로직 구현 (해당 조건 충족 시 무료 증정 상품 추가)
- [x] 프로모션 기간과 프로모션 재고에 따른 할인 적용 처리
- [x] 프로모션 재고가 부족한 경우, 정가 결제 여부를 사용자에게 확인 후 적용

### 6. 멤버십 할인 적용
- [x] 멤버십 회원 여부를 확인하고 할인 적용 (프로모션 미적용 금액의 30% 할인)
- [x] 최대 할인 금액(8,000원)을 초과하지 않도록 구현

### 7. 최종 결제 금액 산출
- [x] 상품별 가격과 수량을 곱하여 총구매액을 계산
- [x] 프로모션 할인 적용 후의 금액 계산
- [x] 멤버십 할인 적용 후의 최종 결제 금액 계산

### 8. 영수증 출력
- [x] 구매 상품 내역 출력 (상품명, 수량, 개별 금액)
- [x] 증정 상품 내역 출력 (프로모션으로 증정된 상품 목록)
- [x] 금액 정보 출력 (총구매액, 행사할인, 멤버십할인, 최종 결제 금액)
- [x] 영수증 레이아웃 정렬

### 9. 추가 구매 요청 처리
- [x] 결제 완료 후 추가 구매 여부를 사용자에게 확인
- [x] 추가 구매 시 업데이트된 재고 목록을 출력하여 새로운 구매 가능

### 10. 에러 처리
- [x] 잘못된 입력 형식에 대해 `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
- [x] 존재하지 않는 상품 입력 시 `[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
- [x] 재고 수량 초과 시 `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
- [x] 그 외 잘못된 입력에 대해 `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
- [x] 예외 메시지는 Enum으로 관리

